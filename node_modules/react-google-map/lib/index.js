!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports["react-google-map"]=e(require("react")):t["react-google-map"]=e(t.React)}(this,function(t){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();n(2);var s=n(3),u=o(s),p=n(4),l=o(p),c=n(1),f=o(c),d=n(5),g=o(d),m=function(t){function e(){r(this,n),t.apply(this,arguments),this.state={map:null,markers:new Map}}a(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props,n=e.defaultLat,o=e.defaultLng,r=e.googleMaps,a=e.zoom,i=new r.Map(f["default"].findDOMNode(this.refs.map),{zoom:a,center:new r.LatLng(n,o),panControl:!1,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1});this.setState({map:i},function(){return t.initMarkers()})},e.prototype.componentWillReceiveProps=function(t){var e=this,n=t.coordinates.some(function(t){return!e.state.markers.has(e.getMarkerId(t))});n&&this.updateMarkers(t.coordinates)},e.prototype.shouldComponentUpdate=function(t,e){return this.props.coordinates.length!==t.coordinates.length},e.prototype.initMarkers=function(){this.addNewMarkers(this.props.coordinates)},e.prototype.updateMarkers=function(t){this.addNewMarkers(t),this.props.onChange(this.getNewCoordinates(),this.state.map.getZoom())},e.prototype.addNewMarkers=function(t){var e=this,n=this.state.markers;t.forEach(function(t,o){var r=e.getMarkerId(t);n.has(r)||n.set(r,e.addMarker(r,t))}),this.setState({markers:n})},e.prototype.getMarkerId=function(t){return t.latitude+"_"+t.longitude},e.prototype.getNewCoordinates=function(){return Array.from(this.state.markers.values()).map(function(t){var e=t.getPosition();return{description:t.description,latitude:e.lat(),longitude:e.lng(),title:t.getTitle()}})},e.prototype.addMarker=function(t,e){var n=this,o=this.props.googleMaps,r=this.state.map,a=new o.Marker({animation:o.Animation.DROP,map:r,position:new o.LatLng(e.latitude,e.longitude),title:e.title,description:e.description,icon:u["default"]});return o.event.addListener(a,"mouseover",function(){a.setIcon(l["default"])}),o.event.addListener(a,"mouseout",function(){a.setIcon(u["default"])}),o.event.addListener(a,"click",function(){n.removeMarker(t)}),a},e.prototype.removeMarker=function(t){var e=this.props.onChange,n=this.state,o=n.map,r=n.markers,a=r.get(t);a.setMap(null),r["delete"](t),e(this.getNewCoordinates(),o.getZoom())},e.prototype.fitBounds=function(){var t=this.props,e=t.boundsOffset,n=t.googleMaps,o=this.state,r=o.map,a=o.markers;if(r&&0!==a.size){var i=Array.from(a.values()).reduce(function(t,e){return t.extend(e.getPosition())},new n.LatLngBounds),s=i.getCenter();i.extend(new n.LatLng(s.lat()+e,s.lng()+e)).extend(new n.LatLng(s.lat()-e,s.lng()-e)),r.setCenter(s),r.fitBounds(i)}},e.prototype.render=function(){return this.fitBounds(),f["default"].createElement("div",{ref:"map",className:"googleMap"})},i(e,null,[{key:"defaultProps",value:{boundsOffset:.002,coordinates:[],defaultLat:43.604305,defaultLng:1.443999,googleMaps:null,onChange:function(){},zoom:8},enumerable:!0}]);var n=e;return e=g["default"]({libraries:"places"})(e)||e}(c.Component);e["default"]=m,t.exports=e["default"]},function(e,n){e.exports=t},function(t,e){},function(t,e,n){t.exports=n.p+"iconMarker.svg"},function(t,e,n){t.exports=n.p+"iconTrash.svg"},function(t,e,n){!function(e,o){t.exports=o(n(1))}(this,function(t){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}e.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},s=n(2),u=o(s),p=n(1),l=o(p);e["default"]=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return function(e){return function(n){function o(){r(this,o),n.apply(this,arguments),this.state={googleMaps:null}}return a(o,n),o.prototype.componentDidMount=function(){var e=this;if("undefined"==typeof window.google&&"undefined"==typeof window.googleMapsLoaded){window.googleMapsLoaded=function(){l["default"].done("google-maps-places")},t.callback="googleMapsLoaded";var n=Object.keys(t).reduce(function(e,n){return null!==t[n]&&void 0!==t[n]?e+=n+"="+t[n]+"&":e},"?").slice(0,-1);l["default"]("https://maps.googleapis.com/maps/api/js"+n),l["default"].ready("google-maps-places",function(){e.handleLoaded(google.maps)})}else this.handleLoaded(google.maps)},o.prototype.handleLoaded=function(t){this.setState({googleMaps:t})},o.prototype.render=function(){var t=this.state.googleMaps;return t?u["default"].createElement(e,i({googleMaps:t},this.props)):null},o}(s.Component)}},t.exports=e["default"]},function(t,e,n){var o,r;/*!
      * $script.js JS loader & dependency manager
      * https://github.com/ded/script.js
      * (c) Dustin Diaz 2014 | License MIT
      */
!function(a,i){"undefined"!=typeof t&&t.exports?t.exports=i():(o=i,r="function"==typeof o?o.call(e,n,e,t):o,!(void 0!==r&&(t.exports=r)))}("$script",function(){function t(t,e){for(var n=0,o=t.length;o>n;++n)if(!e(t[n]))return u;return 1}function e(e,n){t(e,function(t){return!n(t)})}function n(a,i,s){function u(t){return t.call?t():f[t]}function l(){if(!--y){f[v]=1,h&&h();for(var n in g)t(n.split("|"),u)&&!e(g[n],u)&&(g[n]=[])}}a=a[p]?a:[a];var c=i&&i.call,h=c?i:s,v=c?a.join(""):i,y=a.length;return setTimeout(function(){e(a,function t(e,n){return null===e?l():(e=n||-1!==e.indexOf(".js")||/^https?:\/\//.test(e)||!r?e:r+e+".js",m[e]?(v&&(d[v]=1),2==m[e]?l():setTimeout(function(){t(e,!0)},0)):(m[e]=1,v&&(d[v]=1),void o(e,l)))})},0),n}function o(t,e){var n,o=i.createElement("script");o.onload=o.onerror=o[c]=function(){o[l]&&!/^c|loade/.test(o[l])||n||(o.onload=o[c]=null,n=1,m[t]=2,e())},o.async=1,o.src=a?t+(-1===t.indexOf("?")?"?":"&")+a:t,s.insertBefore(o,s.lastChild)}var r,a,i=document,s=i.getElementsByTagName("head")[0],u=!1,p="push",l="readyState",c="onreadystatechange",f={},d={},g={},m={};return n.get=o,n.order=function(t,e,o){!function r(a){a=t.shift(),t.length?n(a,r):n(a,e,o)}()},n.path=function(t){r=t},n.urlArgs=function(t){a=t},n.ready=function(o,r,a){o=o[p]?o:[o];var i=[];return!e(o,function(t){f[t]||i[p](t)})&&t(o,function(t){return f[t]})?r():!function(t){g[t]=g[t]||[],g[t][p](r),a&&a(i)}(o.join("|")),n},n.done=function(t){n([null],t)},n})},function(e,n){e.exports=t}])})}])});
